<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="Halit Cengiz Uzuner — Dijital organizma. Düşünme disiplini, argümantasyon refleksi, sınırsız merak.">
    <meta name="keywords" content="Halit Cengiz Uzuner, organizma, düşünce, argümantasyon, merak">
    <meta name="author" content="Halit Cengiz Uzuner">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="Halit Cengiz Uzuner">
    <meta property="og:description" content="Dijital organizma. Düşünme disiplini, argümantasyon refleksi, sınırsız merak.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://halitcengizuzuner.com/">
    <meta property="og:locale" content="tr_TR">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Halit Cengiz Uzuner">
    <link rel="canonical" href="https://halitcengizuzuner.com/">
    <title>Halit Cengiz Uzuner</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=Crimson+Pro:ital,wght@0,300;0,400;0,600;1,400&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        /* ========================================
           CSS CUSTOM PROPERTIES
           ======================================== */
        :root {
            --bg-deep: #0A0A12;
            --bg-mid: #111119;
            --bg-surface: #1A1420;
            
            --amber: #D4A017;
            --amber-glow: rgba(212, 160, 23, 0.4);
            --amber-soft: rgba(212, 160, 23, 0.15);
            
            --teal: #2A9D8F;
            --teal-glow: rgba(42, 157, 143, 0.4);
            --blue: #3A86FF;
            --blue-glow: rgba(58, 134, 255, 0.3);
            --purple: #7B2FBE;
            --purple-glow: rgba(123, 47, 190, 0.3);
            --red: #C0392B;
            --red-glow: rgba(192, 57, 43, 0.3);
            --green: #6BAA75;
            --green-glow: rgba(107, 170, 117, 0.3);
            --orange: #E8871E;
            --orange-glow: rgba(232, 135, 30, 0.3);
            --silver: #8B9DAF;
            --silver-glow: rgba(139, 157, 175, 0.2);
            
            --text-primary: #F0EBE3;
            --text-secondary: #9A9490;
            --text-muted: #5A5652;
            --border-subtle: rgba(240, 235, 227, 0.08);
            
            --font-display: 'Instrument Serif', serif;
            --font-body: 'Crimson Pro', serif;
            --font-mono: 'JetBrains Mono', monospace;
            
            --transition-page: 0.35s;
            --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
        }

        /* ========================================
           RESET & BASE
           ======================================== */
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
            -webkit-text-size-adjust: 100%;
        }

        body {
            background: var(--bg-deep);
            color: var(--text-primary);
            font-family: var(--font-body);
            line-height: 1.6;
            min-height: 100vh;
            min-height: 100dvh;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            -webkit-tap-highlight-color: transparent;
        }

        /* ========================================
           UNSUPPORTED DEVICE GATE
           ======================================== */
        #unsupported-gate {
            display: none;
            position: fixed;
            inset: 0;
            z-index: 10000;
            background: #000;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 2rem;
        }

        #unsupported-gate p {
            font-family: Georgia, serif;
            font-size: 1rem;
            color: var(--amber);
            line-height: 2;
            max-width: 400px;
        }

        /* ========================================
           INTRO REVEAL ANIMATION
           ======================================== */
        #intro-overlay {
            position: fixed;
            inset: 0;
            z-index: 9000;
            background: var(--bg-deep);
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.6s ease;
        }

        #intro-overlay.fade-out {
            opacity: 0;
            pointer-events: none;
        }

        .intro-core {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--amber);
            box-shadow: 0 0 40px var(--amber-glow), 0 0 80px var(--amber-glow);
            animation: intro-breathe 1.5s ease-in-out infinite, intro-grow 2s var(--ease-out-expo) forwards;
        }

        @keyframes intro-breathe {
            0%, 100% { box-shadow: 0 0 40px var(--amber-glow), 0 0 80px var(--amber-glow); }
            50% { box-shadow: 0 0 60px var(--amber-glow), 0 0 120px rgba(212, 160, 23, 0.25); }
        }

        @keyframes intro-grow {
            0% { transform: scale(0.3); opacity: 0; }
            30% { transform: scale(1); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Orbital dots appearing during intro */
        .intro-orbitals {
            position: absolute;
            width: 200px;
            height: 200px;
        }

        .intro-orbital-dot {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            opacity: 0;
            animation: orbital-appear 0.4s var(--ease-out-expo) forwards;
        }

        @keyframes orbital-appear {
            0% { opacity: 0; transform: scale(0); }
            100% { opacity: 0.8; transform: scale(1); }
        }

        /* ========================================
           APP SHELL
           ======================================== */
        #app {
            opacity: 0;
            transition: opacity 0.5s ease;
            min-height: 100vh;
            min-height: 100dvh;
        }

        #app.visible { opacity: 1; }

        /* ========================================
           HEADER / NAV
           ======================================== */
        .site-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 500;
            padding: 1.25rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            pointer-events: none;
        }

        .site-header > * { pointer-events: auto; }

        /* Language Toggle */
        .lang-toggle {
            display: flex;
            gap: 2px;
            background: rgba(255,255,255,0.04);
            border-radius: 4px;
            overflow: hidden;
            border: 1px solid var(--border-subtle);
        }

        .lang-btn {
            background: transparent;
            border: none;
            color: var(--text-muted);
            font-family: var(--font-mono);
            font-size: 0.7rem;
            font-weight: 400;
            letter-spacing: 0.1em;
            padding: 0.4rem 0.7rem;
            cursor: pointer;
            transition: all 0.25s ease;
        }

        .lang-btn:hover { color: var(--text-secondary); }

        .lang-btn.active {
            color: var(--amber);
            background: var(--amber-soft);
        }

        /* Hamburger */
        .hamburger {
            width: 40px;
            height: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 5px;
            background: transparent;
            border: 1px solid var(--border-subtle);
            border-radius: 4px;
            cursor: pointer;
            transition: border-color 0.3s ease;
            padding: 0;
        }

        .hamburger:hover { border-color: rgba(240, 235, 227, 0.2); }

        .hamburger span {
            display: block;
            width: 16px;
            height: 1.5px;
            background: var(--text-secondary);
            transition: all 0.3s var(--ease-out-expo);
            transform-origin: center;
        }

        .hamburger.open span:nth-child(1) { transform: rotate(45deg) translate(2.3px, 2.3px); }
        .hamburger.open span:nth-child(2) { opacity: 0; transform: scaleX(0); }
        .hamburger.open span:nth-child(3) { transform: rotate(-45deg) translate(2.3px, -2.3px); }

        /* Nav Overlay */
        .nav-overlay {
            position: fixed;
            inset: 0;
            z-index: 400;
            background: rgba(10, 10, 18, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s ease;
        }

        .nav-overlay.open {
            opacity: 1;
            pointer-events: auto;
        }

        .nav-menu {
            list-style: none;
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .nav-menu li { overflow: hidden; }

        .nav-link {
            font-family: var(--font-display);
            font-size: clamp(1.8rem, 5vw, 3rem);
            color: var(--text-secondary);
            text-decoration: none;
            display: inline-block;
            transition: color 0.3s ease, transform 0.3s var(--ease-out-expo);
            cursor: pointer;
            transform: translateY(100%);
            opacity: 0;
        }

        .nav-overlay.open .nav-link {
            transform: translateY(0);
            opacity: 1;
            transition: color 0.3s ease, transform 0.5s var(--ease-out-expo), opacity 0.5s ease;
        }

        .nav-overlay.open li:nth-child(1) .nav-link { transition-delay: 0.05s; }
        .nav-overlay.open li:nth-child(2) .nav-link { transition-delay: 0.1s; }
        .nav-overlay.open li:nth-child(3) .nav-link { transition-delay: 0.15s; }
        .nav-overlay.open li:nth-child(4) .nav-link { transition-delay: 0.2s; }

        .nav-link:hover { color: var(--amber); }

        .nav-link-sub {
            display: block;
            font-family: var(--font-mono);
            font-size: 0.65rem;
            letter-spacing: 0.2em;
            color: var(--text-muted);
            margin-top: 0.3rem;
            text-transform: uppercase;
        }

        /* ========================================
           PAGE TRANSITIONS
           ======================================== */
        .page {
            display: none;
            min-height: 100vh;
            min-height: 100dvh;
        }

        .page.active {
            display: block;
            animation: pageEnter 0.4s var(--ease-out-expo) forwards;
        }

        .page.exiting {
            animation: pageExit 0.3s ease-out forwards;
        }

        @keyframes pageEnter {
            0% { opacity: 0; transform: translateY(12px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        @keyframes pageExit {
            0% { opacity: 1; }
            100% { opacity: 0; filter: brightness(1.3); }
        }

        /* ========================================
           HOME PAGE — ORGANISM
           ======================================== */
        .home {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            min-height: 100dvh;
            padding: 5rem 1.5rem 3rem;
            position: relative;
        }

        /* Background ambient glow */
        .home::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -55%);
            width: min(600px, 90vw);
            height: min(600px, 90vw);
            background: radial-gradient(circle, rgba(212, 160, 23, 0.06) 0%, transparent 70%);
            pointer-events: none;
            z-index: 0;
        }

        /* Entity Core */
        .entity-container {
            position: relative;
            width: clamp(280px, 60vw, 480px);
            height: clamp(280px, 60vw, 480px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1;
        }

        .entity-core {
            width: clamp(60px, 12vw, 90px);
            height: clamp(60px, 12vw, 90px);
            border-radius: 50%;
            background: radial-gradient(circle, var(--amber) 0%, rgba(212, 160, 23, 0.6) 50%, transparent 70%);
            box-shadow: 
                0 0 40px var(--amber-glow),
                0 0 80px rgba(212, 160, 23, 0.2),
                inset 0 0 20px rgba(255, 220, 100, 0.3);
            animation: core-pulse 3s ease-in-out infinite;
            position: relative;
            z-index: 10;
        }

        /* Video overlay on core */
        .entity-video-layer {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: clamp(100px, 22vw, 160px);
            height: clamp(100px, 22vw, 160px);
            border-radius: 50%;
            overflow: hidden;
            z-index: 11;
            opacity: 0;
            transition: opacity 1s ease;
        }

        .entity-video-layer.loaded { opacity: 1; }

        .entity-video-layer video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            mix-blend-mode: lighten;
        }

        @keyframes core-pulse {
            0%, 100% { 
                transform: scale(1); 
                box-shadow: 0 0 40px var(--amber-glow), 0 0 80px rgba(212, 160, 23, 0.2), inset 0 0 20px rgba(255, 220, 100, 0.3);
            }
            50% { 
                transform: scale(1.05); 
                box-shadow: 0 0 60px var(--amber-glow), 0 0 120px rgba(212, 160, 23, 0.15), inset 0 0 30px rgba(255, 220, 100, 0.4);
            }
        }

        /* Core label */
        .entity-name {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 12;
            text-align: center;
            pointer-events: none;
        }

        .entity-name-primary {
            font-family: var(--font-display);
            font-size: clamp(1.1rem, 2.5vw, 1.5rem);
            color: var(--text-primary);
            letter-spacing: 0.15em;
            text-shadow: 0 0 30px rgba(212, 160, 23, 0.5);
            font-weight: 400;
        }

        /* Orbital limbs */
        .orbital-ring {
            position: absolute;
            top: 0; left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .limb-node {
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.4rem;
            pointer-events: auto;
            cursor: default;
            transform: translate(-50%, -50%);
            transition: transform 0.3s var(--ease-out-expo);
        }

        .limb-node:hover { transform: translate(-50%, -50%) scale(1.08); }

        .limb-dot {
            width: clamp(14px, 3vw, 22px);
            height: clamp(14px, 3vw, 22px);
            border-radius: 50%;
            position: relative;
            transition: box-shadow 0.3s ease;
        }

        .limb-dot::after {
            content: '';
            position: absolute;
            inset: -3px;
            border-radius: 50%;
            border: 1px solid currentColor;
            opacity: 0.3;
            animation: limb-ring-pulse 3s ease-in-out infinite;
        }

        @keyframes limb-ring-pulse {
            0%, 100% { transform: scale(1); opacity: 0.3; }
            50% { transform: scale(1.3); opacity: 0.1; }
        }

        .limb-label {
            font-family: var(--font-mono);
            font-size: clamp(0.5rem, 1.2vw, 0.65rem);
            font-weight: 400;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            white-space: nowrap;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }

        .limb-node:hover .limb-label { opacity: 1; }

        /* Limb tooltip */
        .limb-tooltip {
            position: absolute;
            bottom: calc(100% + 12px);
            left: 50%;
            transform: translateX(-50%) translateY(5px);
            background: var(--bg-surface);
            border: 1px solid var(--border-subtle);
            border-radius: 6px;
            padding: 0.6rem 0.8rem;
            min-width: 160px;
            text-align: center;
            opacity: 0;
            pointer-events: none;
            transition: all 0.25s var(--ease-out-expo);
            z-index: 20;
        }

        .limb-node:hover .limb-tooltip {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        .limb-tooltip-name {
            font-family: var(--font-mono);
            font-size: 0.6rem;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            margin-bottom: 0.2rem;
        }

        .limb-tooltip-role {
            font-family: var(--font-body);
            font-size: 0.8rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        /* Connection lines (SVG) */
        .connections-svg {
            position: absolute;
            top: 0; left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .connection-line {
            stroke: var(--amber);
            stroke-width: 0.5;
            opacity: 0.12;
            stroke-dasharray: 4 4;
        }

        /* Sleeping limb */
        .limb-node.sleeping .limb-dot { opacity: 0.4; }
        .limb-node.sleeping .limb-label { opacity: 0.35; }
        .limb-node.sleeping .limb-dot::after { animation-duration: 8s; }

        /* Home philosophy line */
        .home-philosophy {
            margin-top: 3rem;
            text-align: center;
            z-index: 1;
        }

        .home-philosophy p {
            font-family: var(--font-body);
            font-style: italic;
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            color: var(--text-muted);
            letter-spacing: 0.05em;
        }

        /* Full name beneath */
        .home-fullname {
            margin-top: 1rem;
            text-align: center;
            z-index: 1;
        }

        .home-fullname span {
            font-family: var(--font-mono);
            font-size: 0.6rem;
            letter-spacing: 0.3em;
            color: var(--text-muted);
            text-transform: uppercase;
            opacity: 0.5;
        }

        /* ========================================
           CORE PAGE (ÇEKİRDEK)
           ======================================== */
        .page-core {
            padding: 7rem 1.5rem 4rem;
            max-width: 720px;
            margin: 0 auto;
        }

        .core-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .core-title {
            font-family: var(--font-display);
            font-size: clamp(2rem, 5vw, 3rem);
            color: var(--amber);
            margin-bottom: 0.5rem;
        }

        .core-subtitle {
            font-family: var(--font-mono);
            font-size: 0.65rem;
            letter-spacing: 0.3em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .core-body {
            font-family: var(--font-body);
            font-size: clamp(1rem, 2.2vw, 1.15rem);
            color: var(--text-secondary);
            line-height: 1.9;
            text-align: center;
            margin-bottom: 3rem;
        }

        /* Branches */
        .branches-title {
            font-family: var(--font-mono);
            font-size: 0.65rem;
            letter-spacing: 0.25em;
            color: var(--text-muted);
            text-transform: uppercase;
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .branches-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .branch-card {
            border: 1px solid var(--border-subtle);
            border-radius: 6px;
            padding: 1.2rem 1.5rem;
            background: rgba(255,255,255, 0.02);
            transition: border-color 0.3s ease, background 0.3s ease;
        }

        .branch-card:hover {
            border-color: rgba(212, 160, 23, 0.2);
            background: rgba(212, 160, 23, 0.03);
        }

        .branch-date {
            font-family: var(--font-mono);
            font-size: 0.6rem;
            color: var(--text-muted);
            letter-spacing: 0.15em;
        }

        .branch-title {
            font-family: var(--font-display);
            font-size: 1.15rem;
            color: var(--text-primary);
            margin: 0.3rem 0;
        }

        .branch-desc {
            font-family: var(--font-body);
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .branch-status {
            display: inline-block;
            font-family: var(--font-mono);
            font-size: 0.55rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            padding: 0.2rem 0.6rem;
            border-radius: 3px;
            margin-top: 0.5rem;
        }

        .branch-status.active {
            color: var(--green);
            background: rgba(107, 170, 117, 0.1);
            border: 1px solid rgba(107, 170, 117, 0.2);
        }

        .branch-status.completed {
            color: var(--amber);
            background: var(--amber-soft);
            border: 1px solid rgba(212, 160, 23, 0.2);
        }

        /* ========================================
           ASSEMBLY PAGE (MECLİS)
           ======================================== */
        .page-assembly {
            padding: 7rem 1.5rem 4rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .assembly-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .assembly-title {
            font-family: var(--font-display);
            font-size: clamp(2rem, 5vw, 3rem);
            color: var(--amber);
            margin-bottom: 0.5rem;
        }

        .assembly-subtitle {
            font-family: var(--font-mono);
            font-size: 0.65rem;
            letter-spacing: 0.3em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .assembly-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.2rem;
        }

        .limb-card {
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            padding: 1.5rem;
            background: rgba(255,255,255, 0.015);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .limb-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
        }

        .limb-card:hover {
            border-color: rgba(255,255,255,0.12);
            transform: translateY(-2px);
        }

        .limb-card-header {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            margin-bottom: 0.8rem;
        }

        .limb-card-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .limb-card-persona {
            font-family: var(--font-mono);
            font-size: 0.85rem;
            font-weight: 500;
            letter-spacing: 0.1em;
        }

        .limb-card-tool {
            font-family: var(--font-body);
            font-style: italic;
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .limb-card-role {
            font-family: var(--font-body);
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .limb-card-status {
            font-family: var(--font-mono);
            font-size: 0.55rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            margin-top: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .status-dot {
            width: 5px;
            height: 5px;
            border-radius: 50%;
            animation: status-blink 2s ease-in-out infinite;
        }

        .status-dot.sleeping { animation-duration: 6s; opacity: 0.4; }

        @keyframes status-blink {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 1; }
        }

        /* ========================================
           EMANATIONS PAGE (YAYILIMLAR)
           ======================================== */
        .page-emanations {
            padding: 7rem 1.5rem 4rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .emanations-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .emanations-title {
            font-family: var(--font-display);
            font-size: clamp(2rem, 5vw, 3rem);
            color: var(--amber);
            margin-bottom: 0.5rem;
        }

        .emanations-subtitle {
            font-family: var(--font-mono);
            font-size: 0.65rem;
            letter-spacing: 0.3em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .emanation-card {
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            padding: 1.8rem;
            margin-bottom: 1.2rem;
            background: rgba(255,255,255, 0.015);
            transition: all 0.3s ease;
        }

        .emanation-card:hover {
            border-color: rgba(212, 160, 23, 0.15);
            background: rgba(212, 160, 23, 0.02);
        }

        .emanation-meta {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 0.8rem;
        }

        .emanation-category {
            font-family: var(--font-mono);
            font-size: 0.6rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--teal);
        }

        .emanation-date {
            font-family: var(--font-mono);
            font-size: 0.6rem;
            color: var(--text-muted);
            letter-spacing: 0.1em;
        }

        .emanation-title {
            font-family: var(--font-display);
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .emanation-summary {
            font-family: var(--font-body);
            font-size: 0.95rem;
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 1.2rem;
        }

        .emanation-actions {
            display: flex;
            gap: 0.8rem;
            flex-wrap: wrap;
        }

        .emanation-btn {
            font-family: var(--font-mono);
            font-size: 0.65rem;
            font-weight: 400;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: var(--text-secondary);
            background: transparent;
            border: 1px solid var(--border-subtle);
            padding: 0.6rem 1.2rem;
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
        }

        .emanation-btn:hover {
            border-color: var(--teal);
            color: var(--teal);
        }

        .emanation-btn.listen:hover {
            border-color: var(--purple);
            color: var(--purple);
        }

        /* ========================================
           PORTAL GATE
           ======================================== */
        .page-portal {
            padding: 7rem 1.5rem 4rem;
            max-width: 560px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            min-height: 100dvh;
        }

        .portal-header {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .portal-title {
            font-family: var(--font-display);
            font-size: clamp(2rem, 5vw, 3rem);
            color: var(--amber);
            margin-bottom: 1rem;
        }

        .portal-statement {
            font-family: var(--font-body);
            font-size: clamp(0.9rem, 2vw, 1.05rem);
            color: var(--text-secondary);
            line-height: 1.8;
            font-style: italic;
        }

        .portal-form {
            width: 100%;
        }

        .portal-textarea {
            width: 100%;
            min-height: 140px;
            background: rgba(255,255,255, 0.03);
            border: 1px solid var(--border-subtle);
            border-radius: 6px;
            padding: 1rem 1.2rem;
            color: var(--text-primary);
            font-family: var(--font-body);
            font-size: 0.95rem;
            line-height: 1.6;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        .portal-textarea:focus {
            outline: none;
            border-color: rgba(212, 160, 23, 0.3);
        }

        .portal-textarea::placeholder {
            color: var(--text-muted);
            font-style: italic;
        }

        .portal-char-count {
            font-family: var(--font-mono);
            font-size: 0.6rem;
            color: var(--text-muted);
            text-align: right;
            margin-top: 0.3rem;
            letter-spacing: 0.1em;
        }

        .portal-actions {
            display: flex;
            gap: 0.8rem;
            margin-top: 1.2rem;
            justify-content: center;
        }

        .portal-submit {
            font-family: var(--font-mono);
            font-size: 0.7rem;
            font-weight: 400;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--amber);
            background: transparent;
            border: 1px solid rgba(212, 160, 23, 0.3);
            padding: 0.8rem 2rem;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .portal-submit:hover {
            background: var(--amber-soft);
            border-color: var(--amber);
            box-shadow: 0 0 20px rgba(212, 160, 23, 0.15);
        }

        .portal-mic {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: transparent;
            border: 1px solid var(--border-subtle);
            color: var(--text-muted);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 0;
        }

        .portal-mic:hover {
            border-color: var(--red);
            color: var(--red);
        }

        .portal-mic.recording {
            border-color: var(--red);
            background: rgba(192, 57, 43, 0.15);
            color: var(--red);
            animation: mic-pulse 1s ease-in-out infinite;
        }

        @keyframes mic-pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(192, 57, 43, 0); }
            50% { box-shadow: 0 0 0 8px rgba(192, 57, 43, 0.15); }
        }

        .portal-mic svg {
            width: 18px;
            height: 18px;
            fill: currentColor;
        }

        .portal-response {
            text-align: center;
            margin-top: 2rem;
            display: none;
        }

        .portal-response.show { display: block; }

        .portal-response p {
            font-family: var(--font-body);
            font-size: 0.95rem;
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: 0.5rem;
        }

        .portal-credentials {
            background: rgba(255,255,255, 0.03);
            border: 1px solid var(--border-subtle);
            border-radius: 6px;
            padding: 1rem 1.5rem;
            margin-top: 1rem;
            display: inline-block;
        }

        .portal-credentials code {
            font-family: var(--font-mono);
            font-size: 0.8rem;
            color: var(--amber);
            display: block;
            margin: 0.2rem 0;
            letter-spacing: 0.05em;
        }

        .portal-48h {
            font-family: var(--font-mono);
            font-size: 0.6rem;
            color: var(--text-muted);
            letter-spacing: 0.15em;
            text-transform: uppercase;
            margin-top: 1rem;
        }

        /* ========================================
           RESPONSIVE
           ======================================== */
        @media (max-width: 768px) {
            .site-header { padding: 1rem; }
            
            .entity-container {
                width: 300px;
                height: 300px;
            }

            .limb-tooltip { display: none; }

            .assembly-grid { grid-template-columns: 1fr; }

            .portal-actions { flex-direction: column; align-items: center; }
        }

        @media (max-width: 480px) {
            .entity-container {
                width: 260px;
                height: 260px;
            }

            .limb-label { font-size: 0.45rem; }
        }

        /* Reduced motion */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* ========================================
           AUDIO MODAL
           ======================================== */
        .audio-modal {
            position: fixed;
            inset: 0;
            z-index: 600;
            background: rgba(10, 10, 18, 0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .audio-modal.open {
            opacity: 1;
            pointer-events: auto;
        }

        .audio-modal-content {
            text-align: center;
            max-width: 400px;
            padding: 2rem;
        }

        .audio-modal-title {
            font-family: var(--font-display);
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 0.3rem;
        }

        .audio-modal-sub {
            font-family: var(--font-mono);
            font-size: 0.6rem;
            color: var(--text-muted);
            letter-spacing: 0.15em;
            margin-bottom: 1.5rem;
        }

        .audio-modal audio {
            width: 100%;
            max-width: 320px;
        }

        .audio-modal-close {
            font-family: var(--font-mono);
            font-size: 0.65rem;
            letter-spacing: 0.2em;
            color: var(--text-muted);
            background: transparent;
            border: none;
            cursor: pointer;
            margin-top: 1.5rem;
            padding: 0.5rem 1rem;
            transition: color 0.3s ease;
            text-transform: uppercase;
        }

        .audio-modal-close:hover { color: var(--text-secondary); }
    </style>
</head>
<body>

<!-- UNSUPPORTED DEVICE GATE -->
<div id="unsupported-gate">
    <p>
        Bu site, cihazınızın mevcut teknolojisiyle görüntülenemiyor.<br><br>
        This site requires a more capable device to display.
    </p>
</div>

<!-- INTRO REVEAL -->
<div id="intro-overlay">
    <div class="intro-core"></div>
</div>

<!-- APP -->
<div id="app">

    <!-- HEADER -->
    <header class="site-header">
        <div class="lang-toggle">
            <button class="lang-btn active" data-lang="tr">TR</button>
            <button class="lang-btn" data-lang="en">EN</button>
        </div>
        <button class="hamburger" id="hamburgerBtn" aria-label="Menü">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </header>

    <!-- NAV OVERLAY -->
    <nav class="nav-overlay" id="navOverlay">
        <ul class="nav-menu">
            <li><a class="nav-link" data-page="home"><span data-tr="Ana" data-en="Home">Ana</span><span class="nav-link-sub" data-tr="organizma" data-en="organism">organizma</span></a></li>
            <li><a class="nav-link" data-page="core"><span data-tr="Çekirdek" data-en="Core">Çekirdek</span><span class="nav-link-sub" data-tr="düşünce gövdesi" data-en="thought trunk">düşünce gövdesi</span></a></li>
            <li><a class="nav-link" data-page="assembly"><span data-tr="Meclis" data-en="Assembly">Meclis</span><span class="nav-link-sub" data-tr="uzuvlar" data-en="limbs">uzuvlar</span></a></li>
            <li><a class="nav-link" data-page="emanations"><span data-tr="Yayılımlar" data-en="Emanations">Yayılımlar</span><span class="nav-link-sub" data-tr="çıktılar" data-en="outputs">çıktılar</span></a></li>
            <li><a class="nav-link" data-page="portal"><span data-tr="Portal" data-en="Portal">Portal</span><span class="nav-link-sub" data-tr="kapı" data-en="gate">kapı</span></a></li>
        </ul>
    </nav>

    <!-- ===== HOME PAGE ===== -->
    <main class="page home active" id="page-home">
        <div class="entity-container" id="entityContainer">
            <!-- SVG Connection lines -->
            <svg class="connections-svg" id="connectionsSvg"></svg>

            <!-- Core -->
            <div class="entity-core" id="entityCore"></div>

            <!-- Video layer (bonus) -->
            <div class="entity-video-layer" id="videoLayer">
                <video muted playsinline loop preload="none"
                       poster="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1 1'%3E%3Crect fill='%230A0A12' width='1' height='1'/%3E%3C/svg%3E">
                    <source src="assets/video/entity_loop.webm" type="video/webm">
                    <source src="assets/video/entity_loop.mp4" type="video/mp4">
                </video>
            </div>

            <!-- Name overlay on core -->
            <div class="entity-name">
                <div class="entity-name-primary">HALİT</div>
            </div>

            <!-- Orbital ring with limb nodes -->
            <div class="orbital-ring" id="orbitalRing"></div>
        </div>

        <div class="home-philosophy">
            <p data-tr="Sorular cevaplardan değerlidir." data-en="Questions outweigh answers.">Sorular cevaplardan değerlidir.</p>
        </div>
        <div class="home-fullname">
            <span>Halit Cengiz Uzuner</span>
        </div>
    </main>

    <!-- ===== CORE PAGE ===== -->
    <section class="page page-core" id="page-core">
        <div class="core-header">
            <h1 class="core-title" data-tr="Çekirdek" data-en="Core">Çekirdek</h1>
            <div class="core-subtitle" data-tr="düşünce gövdesi" data-en="thought trunk">düşünce gövdesi</div>
        </div>
        <div class="core-body" data-tr="1995'ten beri hukukçu. Uzun süredir aktif pratik yok. Kalan: düşünme disiplini, argümantasyon refleksi, ve sunumun mesajın parçası olduğu inancı. Alan yok, sınır yok — merak nereye çekerse oraya." data-en="Jurist since 1995. Long out of active practice. What remains: thinking discipline, argumentation reflex, and the conviction that presentation is part of the message. No fixed field, no boundaries — curiosity leads.">
            1995'ten beri hukukçu. Uzun süredir aktif pratik yok. Kalan: düşünme disiplini, argümantasyon refleksi, ve sunumun mesajın parçası olduğu inancı. Alan yok, sınır yok — merak nereye çekerse oraya.
        </div>
        <div class="branches-title" data-tr="dallar" data-en="branches">dallar</div>
        <div class="branches-container" id="branchesContainer">
            <!-- Branches populated by JS -->
        </div>
    </section>

    <!-- ===== ASSEMBLY PAGE ===== -->
    <section class="page page-assembly" id="page-assembly">
        <div class="assembly-header">
            <h1 class="assembly-title" data-tr="Meclis" data-en="Assembly">Meclis</h1>
            <div class="assembly-subtitle" data-tr="uzuvlar" data-en="limbs">uzuvlar</div>
        </div>
        <div class="assembly-grid" id="assemblyGrid">
            <!-- Limb cards populated by JS -->
        </div>
    </section>

    <!-- ===== EMANATIONS PAGE ===== -->
    <section class="page page-emanations" id="page-emanations">
        <div class="emanations-header">
            <h1 class="emanations-title" data-tr="Yayılımlar" data-en="Emanations">Yayılımlar</h1>
            <div class="emanations-subtitle" data-tr="çekirdekten yayılan" data-en="emanating from core">çekirdekten yayılan</div>
        </div>
        <div id="emanationsContainer">
            <!-- Emanation cards populated by JS -->
        </div>
    </section>

    <!-- ===== PORTAL PAGE ===== -->
    <section class="page page-portal" id="page-portal">
        <div class="portal-header">
            <h1 class="portal-title">Portal</h1>
            <p class="portal-statement" data-tr="Talepler incelenir. Uygun görülürse yanıt verilir. Talebinizi açık ve kesin biçimde ifade edin." data-en="Requests are reviewed. Responses are given at discretion. State your request clearly and precisely.">Talepler incelenir. Uygun görülürse yanıt verilir. Talebinizi açık ve kesin biçimde ifade edin.</p>
        </div>
        <div class="portal-form" id="portalForm">
            <textarea class="portal-textarea" id="portalTextarea" maxlength="2000" data-tr-placeholder="Talebinizi yazın..." data-en-placeholder="Write your request..."></textarea>
            <div class="portal-char-count"><span id="charCount">0</span> / 2000</div>
            <div class="portal-actions">
                <button class="portal-submit" id="portalSubmit" data-tr="Gönder" data-en="Submit">Gönder</button>
                <button class="portal-mic" id="portalMic" aria-label="Sesli istem">
                    <svg viewBox="0 0 24 24"><path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm-1-9c0-.55.45-1 1-1s1 .45 1 1v6c0 .55-.45 1-1 1s-1-.45-1-1V5zm6 6c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/></svg>
                </button>
            </div>
        </div>
        <div class="portal-response" id="portalResponse">
            <p data-tr="Talebiniz alındı. 48 saat içinde değerlendirilecektir." data-en="Your request has been received. It will be reviewed within 48 hours.">Talebiniz alındı. 48 saat içinde değerlendirilecektir.</p>
            <p data-tr="Bu süre sonunda aşağıdaki bilgilerle giriş yaparak sonucu öğrenebilirsiniz." data-en="After this period, log in with the credentials below to check the result.">Bu süre sonunda aşağıdaki bilgilerle giriş yaparak sonucu öğrenebilirsiniz.</p>
            <div class="portal-credentials" id="portalCredentials"></div>
            <div class="portal-48h">48h</div>
        </div>
    </section>

</div>

<!-- AUDIO MODAL -->
<div class="audio-modal" id="audioModal">
    <div class="audio-modal-content">
        <div class="audio-modal-title" id="audioModalTitle"></div>
        <div class="audio-modal-sub" id="audioModalSub"></div>
        <audio controls preload="none" id="audioPlayer"></audio>
        <br>
        <button class="audio-modal-close" id="audioModalClose" data-tr="Kapat" data-en="Close">Kapat</button>
    </div>
</div>

<script>
(function() {
    'use strict';

    // ==========================================
    // DEVICE CAPABILITY CHECK
    // ==========================================
    const isCapable = (
        'IntersectionObserver' in window &&
        CSS.supports('display', 'grid') &&
        CSS.supports('(--a: 0)')
    );

    if (!isCapable) {
        document.getElementById('unsupported-gate').style.display = 'flex';
        document.getElementById('intro-overlay').style.display = 'none';
        document.getElementById('app').style.display = 'none';
        return;
    }

    // ==========================================
    // DATA
    // ==========================================
    const limbs = [
        { id: 'sancak', name: 'SANCAK', tool: 'Claude', color: 'var(--teal)', colorHex: '#2A9D8F',
          role: { tr: 'Yapısal düşünce, argümantasyon, analiz, yazım, kod, çeviri', en: 'Structural thinking, argumentation, analysis, writing, code, translation' },
          status: 'active', angle: 0 },
        { id: 'poyraz', name: 'POYRAZ', tool: 'NotebookLM', color: 'var(--blue)', colorHex: '#3A86FF',
          role: { tr: 'Kaynak sentezi, çapraz okuma, podcast üretimi', en: 'Source synthesis, cross-reading, podcast generation' },
          status: 'active', angle: 51.4 },
        { id: 'yankiz', name: 'YANKIZ', tool: 'ElevenLabs Reader', color: 'var(--purple)', colorHex: '#7B2FBE',
          role: { tr: 'Metin → ses dönüşümü, dinleme arayüzü', en: 'Text to voice, listening interface' },
          status: 'active', angle: 102.8 },
        { id: 'kiran', name: 'KIRAN', tool: 'Adobe Acrobat', color: 'var(--red)', colorHex: '#C0392B',
          role: { tr: 'Belge işleme, PDF düzenleme', en: 'Document processing, PDF editing' },
          status: 'active', angle: 154.2 },
        { id: 'fiske', name: 'FİSKE', tool: 'Whisper', color: 'var(--green)', colorHex: '#6BAA75',
          role: { tr: 'Ses → metin transkripsiyon', en: 'Voice to text transcription' },
          status: 'active', angle: 205.6 },
        { id: 'isil', name: 'IŞIL', tool: 'Runway', color: 'var(--orange)', colorHex: '#E8871E',
          role: { tr: 'Video üretimi, görsel kimlik', en: 'Video generation, visual identity' },
          status: 'active', angle: 257 },
        { id: 'soluk', name: 'SOLUK', tool: 'DeepL', color: 'var(--silver)', colorHex: '#8B9DAF',
          role: { tr: 'Çeviri desteği', en: 'Translation support' },
          status: 'sleeping', angle: 308.4 }
    ];

    const branches = [
        { 
            date: '2026-01-30',
            title: { tr: '"Aynen Öyle" — Minimal Onay İfadeleri', en: '"Aynen Öyle" — Minimal Affirmation Expressions' },
            desc: { tr: 'Epistemik ve sosyal işlevleri üzerine araştırma notu ve podcast özeti.', en: 'Research note on epistemic and social functions, with podcast summary.' },
            status: 'completed'
        },
        {
            date: '2026-02',
            title: { tr: 'Direnme Dilekçesi — İİK m.58/3', en: 'Resistance Petition — ECA Art.58/3' },
            desc: { tr: 'Çeyrek asırlık yerleşik içtihadı sorgulayan 76 sayfalık hukuki argümantasyon.', en: '76-page legal argumentation challenging a quarter-century of established case law.' },
            status: 'active'
        }
    ];

    const emanations = [
        {
            id: 'aynen-oyle',
            category: { tr: 'DİL', en: 'LANGUAGE' },
            date: '2026-01-30',
            title: { tr: '"Aynen Öyle" — Minimal Onay İfadelerinin Epistemik ve Sosyal İşlevleri', en: '"Aynen Öyle" — Epistemic and Social Functions of Minimal Affirmation Expressions' },
            summary: { tr: 'Günlük dilde sıkça kullandığımız "aynen", "aynen öyle" gibi ifadelerin arkasındaki düşünce mekanizmalarını inceleyen araştırma notu.', en: 'A research note examining the cognitive mechanisms behind commonly used affirmation expressions like "exactly", "precisely".' },
            readUrl: 'raporlar/aynen-oyle.html',
            audioUrl: 'https://pub-09be185c608d4c1e80131e5f82eaca40.r2.dev/aynen-oyle-podcast.mp3',
            audioTitle: { tr: 'Podcast Özeti', en: 'Podcast Summary' },
            audioSub: { tr: '~8 dakikalık sesli özet', en: '~8 minute audio summary' }
        }
    ];

    // ==========================================
    // LANGUAGE SYSTEM
    // ==========================================
    let currentLang = localStorage.getItem('siteLang') || 'tr';

    function setLanguage(lang) {
        currentLang = lang;
        localStorage.setItem('siteLang', lang);
        document.documentElement.lang = lang;

        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.classList.toggle('active', btn.dataset.lang === lang);
        });

        document.querySelectorAll('[data-tr]').forEach(el => {
            if (el.dataset[lang]) el.textContent = el.dataset[lang];
        });

        // Update placeholders
        const textarea = document.getElementById('portalTextarea');
        if (textarea) {
            textarea.placeholder = lang === 'tr' ? textarea.dataset.trPlaceholder : textarea.dataset.enPlaceholder;
        }

        // Re-render dynamic content
        renderBranches();
        renderAssembly();
        renderEmanations();
    }

    // ==========================================
    // NAVIGATION
    // ==========================================
    let currentPage = 'home';
    const hamburger = document.getElementById('hamburgerBtn');
    const navOverlay = document.getElementById('navOverlay');

    hamburger.addEventListener('click', () => {
        hamburger.classList.toggle('open');
        navOverlay.classList.toggle('open');
    });

    function navigateTo(pageId) {
        if (pageId === currentPage) {
            hamburger.classList.remove('open');
            navOverlay.classList.remove('open');
            return;
        }

        const oldPage = document.getElementById('page-' + currentPage);
        const newPage = document.getElementById('page-' + pageId);
        if (!newPage) return;

        // Close nav
        hamburger.classList.remove('open');
        navOverlay.classList.remove('open');

        // Transition
        oldPage.classList.add('exiting');
        setTimeout(() => {
            oldPage.classList.remove('active', 'exiting');
            oldPage.style.display = 'none';
            newPage.style.display = '';
            newPage.classList.add('active');
            currentPage = pageId;
            window.scrollTo(0, 0);
        }, 300);
    }

    document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', () => {
            navigateTo(link.dataset.page);
        });
    });

    // ==========================================
    // RENDER ORBITAL LIMBS (Home page)
    // ==========================================
    function renderOrbitals() {
        const ring = document.getElementById('orbitalRing');
        const svg = document.getElementById('connectionsSvg');
        const container = document.getElementById('entityContainer');
        const rect = container.getBoundingClientRect();
        const cx = rect.width / 2;
        const cy = rect.height / 2;
        const radius = Math.min(cx, cy) * 0.78;

        ring.innerHTML = '';
        let svgLines = '';

        limbs.forEach((limb, i) => {
            const angleRad = (limb.angle - 90) * (Math.PI / 180);
            const x = cx + radius * Math.cos(angleRad);
            const y = cy + radius * Math.sin(angleRad);

            // Connection line
            svgLines += `<line class="connection-line" x1="${cx}" y1="${cy}" x2="${x}" y2="${y}"/>`;

            // Node
            const node = document.createElement('div');
            node.className = 'limb-node' + (limb.status === 'sleeping' ? ' sleeping' : '');
            node.style.left = x + 'px';
            node.style.top = y + 'px';

            node.innerHTML = `
                <div class="limb-dot" style="background:${limb.color}; color:${limb.color};"></div>
                <div class="limb-label" style="color:${limb.color};">${limb.name}</div>
                <div class="limb-tooltip">
                    <div class="limb-tooltip-name">${limb.tool}</div>
                    <div class="limb-tooltip-role">${limb.role[currentLang]}</div>
                </div>
            `;

            ring.appendChild(node);
        });

        svg.innerHTML = svgLines;
    }

    // ==========================================
    // RENDER BRANCHES (Core page)
    // ==========================================
    function renderBranches() {
        const container = document.getElementById('branchesContainer');
        container.innerHTML = branches.map(b => `
            <div class="branch-card">
                <div class="branch-date">${b.date}</div>
                <div class="branch-title">${b.title[currentLang]}</div>
                <div class="branch-desc">${b.desc[currentLang]}</div>
                <span class="branch-status ${b.status}">
                    ${b.status === 'active' ? (currentLang === 'tr' ? 'aktif' : 'active') : (currentLang === 'tr' ? 'tamamlandı' : 'completed')}
                </span>
            </div>
        `).join('');
    }

    // ==========================================
    // RENDER ASSEMBLY (Meclis page)
    // ==========================================
    function renderAssembly() {
        const grid = document.getElementById('assemblyGrid');
        grid.innerHTML = limbs.map(limb => `
            <div class="limb-card">
                <div style="position:absolute;top:0;left:0;right:0;height:2px;background:${limb.color};"></div>
                <div class="limb-card-header">
                    <div class="limb-card-dot" style="background:${limb.color};"></div>
                    <div class="limb-card-persona" style="color:${limb.color};">${limb.name}</div>
                </div>
                <div class="limb-card-tool">${limb.tool}</div>
                <div class="limb-card-role">${limb.role[currentLang]}</div>
                <div class="limb-card-status" style="color: ${limb.status === 'sleeping' ? 'var(--text-muted)' : limb.color};">
                    <span class="status-dot ${limb.status === 'sleeping' ? 'sleeping' : ''}" style="background:${limb.color};"></span>
                    ${limb.status === 'active' ? (currentLang === 'tr' ? 'aktif' : 'active') : (currentLang === 'tr' ? 'uyuyan' : 'sleeping')}
                </div>
            </div>
        `).join('');
    }

    // ==========================================
    // RENDER EMANATIONS
    // ==========================================
    function renderEmanations() {
        const container = document.getElementById('emanationsContainer');
        container.innerHTML = emanations.map(em => `
            <div class="emanation-card">
                <div class="emanation-meta">
                    <span class="emanation-category">${em.category[currentLang]}</span>
                    <span class="emanation-date">${em.date}</span>
                </div>
                <div class="emanation-title">${em.title[currentLang]}</div>
                <div class="emanation-summary">${em.summary[currentLang]}</div>
                <div class="emanation-actions">
                    <a href="${em.readUrl}" class="emanation-btn" data-tr="Tamamını Oku" data-en="Read Full">${currentLang === 'tr' ? 'Tamamını Oku' : 'Read Full'}</a>
                    ${em.audioUrl ? `<button class="emanation-btn listen" onclick="openAudioModal('${em.audioUrl}', '${em.audioTitle[currentLang]}', '${em.audioSub[currentLang]}')" data-tr="Özetini Dinle" data-en="Listen Summary">${currentLang === 'tr' ? 'Özetini Dinle' : 'Listen Summary'}</button>` : ''}
                </div>
            </div>
        `).join('');
    }

    // ==========================================
    // AUDIO MODAL
    // ==========================================
    window.openAudioModal = function(url, title, sub) {
        const modal = document.getElementById('audioModal');
        document.getElementById('audioModalTitle').textContent = title;
        document.getElementById('audioModalSub').textContent = sub;
        document.getElementById('audioPlayer').src = url;
        modal.classList.add('open');
    };

    document.getElementById('audioModalClose').addEventListener('click', () => {
        const modal = document.getElementById('audioModal');
        const player = document.getElementById('audioPlayer');
        player.pause();
        player.src = '';
        modal.classList.remove('open');
    });

    document.getElementById('audioModal').addEventListener('click', (e) => {
        if (e.target === e.currentTarget) {
            document.getElementById('audioModalClose').click();
        }
    });

    // ==========================================
    // PORTAL
    // ==========================================
    const portalTextarea = document.getElementById('portalTextarea');
    const charCount = document.getElementById('charCount');

    portalTextarea.addEventListener('input', () => {
        charCount.textContent = portalTextarea.value.length;
    });

    document.getElementById('portalSubmit').addEventListener('click', () => {
        const text = portalTextarea.value.trim();
        if (!text) return;

        // Generate temp credentials (demo — real version uses Workers API)
        const userId = 'ziyaretci_' + Math.floor(1000 + Math.random() * 9000);
        const pass = Array.from({length: 8}, () => 
            'ABCDEFGHJKMNPQRSTUVWXYZabcdefghjkmnpqrstuvwxyz23456789'[Math.floor(Math.random() * 54)]
        ).join('');

        document.getElementById('portalForm').style.display = 'none';
        const response = document.getElementById('portalResponse');
        response.classList.add('show');
        document.getElementById('portalCredentials').innerHTML = `
            <code>${currentLang === 'tr' ? 'Kullanıcı' : 'User'}: ${userId}</code>
            <code>${currentLang === 'tr' ? 'Şifre' : 'Password'}: ${pass}</code>
        `;
    });

    // Microphone (voice request)
    const micBtn = document.getElementById('portalMic');
    let mediaRecorder = null;
    let audioChunks = [];

    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
        micBtn.addEventListener('click', async () => {
            if (mediaRecorder && mediaRecorder.state === 'recording') {
                mediaRecorder.stop();
                micBtn.classList.remove('recording');
                return;
            }

            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                mediaRecorder = new MediaRecorder(stream);
                audioChunks = [];

                mediaRecorder.ondataavailable = (e) => audioChunks.push(e.data);
                mediaRecorder.onstop = () => {
                    stream.getTracks().forEach(t => t.stop());
                    // In production: upload audioChunks to R2
                    portalTextarea.value = currentLang === 'tr' 
                        ? '[Sesli istem kaydedildi — inceleme bekliyor]' 
                        : '[Voice request recorded — awaiting review]';
                    charCount.textContent = portalTextarea.value.length;
                };

                mediaRecorder.start();
                micBtn.classList.add('recording');

                // Auto-stop after 120s
                setTimeout(() => {
                    if (mediaRecorder && mediaRecorder.state === 'recording') {
                        mediaRecorder.stop();
                        micBtn.classList.remove('recording');
                    }
                }, 120000);

            } catch (err) {
                // Mic denied or unavailable — hide button
                micBtn.style.display = 'none';
            }
        });
    } else {
        // No MediaRecorder support — hide mic
        micBtn.style.display = 'none';
    }

    // ==========================================
    // VIDEO BONUS LAYER
    // ==========================================
    function initVideoLayer() {
        const layer = document.getElementById('videoLayer');
        const video = layer.querySelector('video');

        video.preload = 'auto';

        const onPlay = () => {
            setTimeout(() => {
                if (video.videoWidth > 0 && !video.paused) {
                    layer.classList.add('loaded');
                }
            }, 500);
        };

        video.addEventListener('playing', onPlay);
        video.play().catch(() => {});
    }

    // ==========================================
    // INTRO SEQUENCE
    // ==========================================
    function runIntro() {
        const overlay = document.getElementById('intro-overlay');
        const app = document.getElementById('app');

        // After 2s, fade out intro
        setTimeout(() => {
            overlay.classList.add('fade-out');
            app.classList.add('visible');

            // Render after visible
            renderOrbitals();
            renderBranches();
            renderAssembly();
            renderEmanations();

            // Init video bonus
            setTimeout(initVideoLayer, 500);
        }, 2000);

        // Remove overlay from DOM after transition
        setTimeout(() => {
            overlay.remove();
        }, 2800);
    }

    // ==========================================
    // INIT
    // ==========================================
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            setLanguage(btn.dataset.lang);
            renderOrbitals(); // re-render tooltips
        });
    });

    // Resize handler for orbital recalc
    let resizeTimer;
    window.addEventListener('resize', () => {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(renderOrbitals, 200);
    });

    // Keyboard nav
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            hamburger.classList.remove('open');
            navOverlay.classList.remove('open');
            document.getElementById('audioModalClose').click();
        }
    });

    // Set initial language
    setLanguage(currentLang);

    // Run intro
    runIntro();

})();
</script>

</body>
</html>
